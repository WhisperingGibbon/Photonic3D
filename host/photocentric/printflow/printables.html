<html>
    <head>
        <title>main menu</title>
        <style>

		.printbutton { 
			position: absolute; 
			top: 315px; 
			left: 250px;
			width:300px;
			color: white;
			text-align: center;
			font-size: 30px;
			z-index: 2;
		}
		.printlabel { 
			position: absolute; 
			top: 120; 
			left: 130;
			width:60px;
			color: white;
			text-align: center;
			font-size: 30px;
			z-index: 2;
		}
		
		.printables {
			position: absolute; 
			top: 132px; 
			left: 250px;
			width:300px;
			
			background-color: transparent;
			color: white;
			font-size: 23px;
			border: none;
			padding: 5px;
			line-height: 1;
			border: 0;
			border-radius: 10px;
		}

        </style>
        <!-- Latest compiled and minified CSS -->
        <link rel="stylesheet" href="../bootstrap/css/bootstrap.min.css">

        <!-- jQuery library -->
        <script src="../jquery/jquery.min.js"></script>

        <!-- Latest compiled JavaScript -->
        <script src="../bootstrap/js/bootstrap.min.js"></script>

        <!-- Latest v1 Angular -->
        <script src="../angular/js/angular.min.js"></script>

        <script src="js/moment.min.js"></script>
		
		<link href="css/printflow.css" rel="stylesheet">
    </head>
    <body style="background-color: black;" onload="fillList();">
		<script>
			test="";
			printStatus="";
			$.getJSON("../services/printJobs/getByPrinterName/Photocentric%2010").done(function (data){
					printStatus= (data.status);
				});
			setInterval(function() {
				if (printStatus=="Printing"){
					window.location.href="printdialogue.html";
				}
				document.getElementById("time").innerHTML = moment().format("HH:mm:ss[<br>]DD-MMM-YY");
				
				$.getJSON("../services/printJobs/getByPrinterName/Photocentric%2010").done(function (data){
					printStatus= (data.status);
				});
				
			}, 1000);
			function startPrint(){
				if (document.getElementById("printables").selectedIndex <0){
					//do nothing
					$('#warning').show();
					setTimeout(function() {
						$('#warning').hide();
					}, 5000);
				}
				else{
					$.post("../services/printables/print/"+$("#printables").val())
					.done(function(data){
					window.location.href="printdialogue.html";
				});
				}
			}
			function fillList(){
				select = document.getElementById("printables");
				$.getJSON('../services/printables/list')
				.done(function(data){
					$.each(data, function (key, val) {
						option = document.createElement('option');
						option.text = option.value = val.name+"."+val.extension;
						select.add( option );
					});
					var options = $("#printables option");                    // Collect options         
					options.detach().sort(function(a,b) {               // Detach from select, then Sort
						var at = $(a).text().toLowerCase();
						var bt = $(b).text().toLowerCase();         
						return (at > bt)?1:((at < bt)?-1:0);            // Tell the sort function how to order
					});
					options.appendTo("#printables");        
				})
				.fail(function(){
					
				});
			}
			
		</script>
        <div class="screen">
            <div class="main">
				<img src="images/printables.png" usemap="printables" class="uilayer">
				<map name="printables" style="z-index: 100;">
					<area  alt="" title="" shape="poly" coords="160,40,137,45,118,58,105,77,100,100,105,123,118,142,137,155,160,160,183,155,202,142,215,123,220,100,215,77,202,58,183,45" style="outline:none;" target="_self" onClick="startPrint();"     />
					<area  alt="" title="" href="index.html" shape="poly" coords="48,16,35,19,25,26,18,36,15,49,18,62,25,72,35,79,48,82,61,79,71,72,78,62,81,49,78,36,71,26,61,19" style="outline:none;" target="_self"     />
					<area  alt="" title="WPS Setup" shape="rect" coords="252,268,548,324" style="outline:none;" target="_self" onClick="startPrint();"    />
				</map>
				<div name="time" id="time" class="time"><script>document.write(moment().format("HH:mm:ss[<br>]DD-MMM-YY"));</script></div>
				<img name="wifi" id="wifi" class="wifi" src="images/wifi-0.png">
				<img name="homehighlight" id="homehighlight" class="homehighlight" src="images/homehighlightANIM.png" onClick="location.href='index.html';">
				<img name="bigbuttonhighlight" id="bigbuttonhighlight" class="bigbuttonhighlight" src="images/bigbuttonANIM.png" onClick="startPrint();">
				<div name="printlabel" class="printlabel" id="printlabel" onClick="startPrint();">Print</div>
				<div name="printbutton" class="printbutton" id="printbutton" onClick="startPrint();">Print!</div>
				<select size="6" class="printables" id="printables">
				</select>
				<div name="warn" id="warn" class="warn"><div id="warning" role="alert" class="alert alert-danger collapse" ><strong>Error</strong><br>Please select an item to print!</div>
            </div>
        </div>

	
    </body>
</html>